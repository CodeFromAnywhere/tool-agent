# May 2024

- âœ… Setup boilerplate
- âœ… Fix routing issues
- âœ… Implement refresh propagation to localStorage
- âœ… change pattern data.actionschema to allow for `-_~.AZ`
- âœ… make AgentOpenapi item and create crud-openapi at https://data.actionschema.com/agent-openapi/openapi.json
- âœ… create npm script that turns openapi into an SDK client
- âœ… ensure `databaseId` goes lowercase upon creation
- âœ… Fix bug so the script `npm run crud` actually works
- âœ… Implement refresh storage
- âœ… Implement OpenAPI

# June 2024

- âœ… Implement simple `agent.actionschema.com/asst_xxxx/message` with `openai` SDK
- âœ… Expose `agent.actionschema.com/asst_xxxx/agent.json` with instructions & tools taken from openai's API.
- ğŸ¤” Revelation: `Asssistant` doesn't contain any information about the API URL, paths, or Authentication. This makes this whole idea problematic as tools cannot be accessed without external implementation. Therefore, instead, we could build `agent.actionschema.com/[agentSlug]/message` and `agent.json` and `openapi.json` but not with login to openai.

## Refactor Agents, Week of June 3rd

âœ… Instead of `refreshOpenai`, let's create agents via a form in which you provide an `openapiUrl` and then you can manage further configuration. Ensure default instructions and other settings are generated by default.

âœ… Instead, store this for OpenAIAgent: `{ agentSlug, openaiSecretKey, deepgramToken, authToken, name, instructions, model, top_p, temperature, openapiAuth, openapiUrl, functionsCalculated }`

âœ… Rename `details.json` to `GET details` and ensure it provides all details including `openapiAuth` only if `Authorization` header is set to match authToken.

âœ… Refactor `/message` to not use an assistant

âœ… To support functions, it needs to call the OpenAPI based on something returned as step. https://platform.openai.com/docs/assistants/tools/function-calling/quickstart

âœ… Ensure authToken gets added automatically for new agents

âœ… Confirm an agent with people-openapi tool works.

âœ… Ensure `message` can also handle images by url

âŒ Chat Completions doesn't support other files, so let's leave it at this for now. We could add logic we had in whatsapp-twilio stuff to also handle other types of files, but it's probably better to leave this and have a broader set of models that we support without increasing somplexity.

âœ… Ensure `message` response can also handle more than just text

## Fixes June 7th

- âœ… Fix openapi

  - âœ… remove `deepgramToken` from openapi for making an agent.
  - âœ… also change order: required first!
  - âœ… model should have some options only

- âœ… Fix `<OpenapiForms>`

  - âœ… `/message` input should be a textarea
  - âœ… make a button to generate a twilio url: `prompt(deepgramToken)`
  - âœ… make the textareas a bit bigger

- âœ… Allow updating an agent: link "Update" to prefil form with existing agent

- âœ… When seeing an agent on /[agentSlug], add twilio-phone-callback and twilio-message-callback URLs so its easy to setup

- Fix when using openapi tools

  - url is incorrect (debug this)
  - test `/message` and confirm it works
  - After tools work in message, test if the tool works in deepgram as well

After this all works well, test with Bruna/Milan/Rutger

Now integrate whatsapp.

# LATER

- Support for threads
- Support for streaming via `/streamMessage`
